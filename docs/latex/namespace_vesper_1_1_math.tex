\doxysection{Vesper::\+Math Namespace Reference}
\hypertarget{namespace_vesper_1_1_math}{}\label{namespace_vesper_1_1_math}\index{Vesper::Math@{Vesper::Math}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \doxymbox{\hyperlink{namespace_vesper_1_1_math_a9afbc415ae69a15ec7a15e77922b772e}{Decompose\+Transform}} (const glm::\+mat4 \&transform, glm::\+vec3 \&translation, glm::\+vec3 \&rotation, glm::\+vec3 \&scale)
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{namespace_vesper_1_1_math_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespace_vesper_1_1_math_a9afbc415ae69a15ec7a15e77922b772e}\index{Vesper::Math@{Vesper::Math}!DecomposeTransform@{DecomposeTransform}}
\index{DecomposeTransform@{DecomposeTransform}!Vesper::Math@{Vesper::Math}}
\doxysubsubsection{\texorpdfstring{DecomposeTransform()}{DecomposeTransform()}}
{\footnotesize\ttfamily \label{namespace_vesper_1_1_math_a9afbc415ae69a15ec7a15e77922b772e} 
bool Vesper::\+\+Math::\+\+Decompose\+Transform (\begin{DoxyParamCaption}\item[{const glm::\+mat4 \&}]{transform}{, }\item[{glm::\+vec3 \&}]{translation}{, }\item[{glm::\+vec3 \&}]{rotation}{, }\item[{glm::\+vec3 \&}]{scale}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00011\ \ \ \ \ \{}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ From\ glm::decompose\ in\ matrix\_decompose.inl}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }glm;}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }T\ =\ float;}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ mat4\ LocalMatrix(transform);}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Normalize\ the\ matrix.}}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (epsilonEqual(LocalMatrix[3][3],\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(0),\ epsilon<T>()))}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ First,\ isolate\ perspective.\ \ This\ is\ the\ messiest.}}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ epsilonNotEqual(LocalMatrix[0][3],\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0),\ epsilon<T>())\ ||}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \ \ \ \ epsilonNotEqual(LocalMatrix[1][3],\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0),\ epsilon<T>())\ ||}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ epsilonNotEqual(LocalMatrix[2][3],\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0),\ epsilon<T>()))}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clear\ the\ perspective\ partition}}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ LocalMatrix[0][3]\ =\ LocalMatrix[1][3]\ =\ LocalMatrix[2][3]\ =\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0);}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ LocalMatrix[3][3]\ =\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1);}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Next\ take\ care\ of\ translation\ (easy).}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ translation\ =\ vec3(LocalMatrix[3]);}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ LocalMatrix[3]\ =\ vec4(0,\ 0,\ 0,\ LocalMatrix[3].w);}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ vec3\ Row[3],\ Pdum3;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ get\ scale\ and\ shear.}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (length\_t\ i\ =\ 0;\ i\ <\ 3;\ ++i)}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (length\_t\ j\ =\ 0;\ j\ <\ 3;\ ++j)}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Row[i][j]\ =\ LocalMatrix[i][j];}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ X\ scale\ factor\ and\ normalize\ first\ row.}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ scale.x\ =\ length(Row[0]);}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ Row[0]\ =\ detail::scale(Row[0],\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ scale.y\ =\ length(Row[1]);}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ Row[1]\ =\ detail::scale(Row[1],\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ scale.z\ =\ length(Row[2]);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ Row[2]\ =\ detail::scale(Row[2],\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ At\ this\ point,\ the\ matrix\ (in\ rows[])\ is\ orthonormal.}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ a\ coordinate\ system\ flip.\ \ If\ the\ determinant}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ -\/1,\ then\ negate\ the\ matrix\ and\ the\ scaling\ factors.}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#if\ 0 }}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ Pdum3\ =\ cross(Row[1],\ Row[2]);\ \textcolor{comment}{//\ v3Cross(row[1],\ row[2],\ Pdum3);}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dot(Row[0],\ Pdum3)\ <\ 0)}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (length\_t\ i\ =\ 0;\ i\ <\ 3;\ i++)}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scale[i]\ *=\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(-\/1);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Row[i]\ *=\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(-\/1);}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ rotation.y\ =\ asin(-\/Row[0][2]);}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cos(rotation.y)\ !=\ 0)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ rotation.x\ =\ atan2(Row[1][2],\ Row[2][2]);}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ rotation.z\ =\ atan2(Row[0][1],\ Row[0][0]);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ rotation.x\ =\ atan2(-\/Row[2][0],\ Row[1][1]);}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ rotation.z\ =\ 0;}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00080\ \ \ \ \ \}}

\end{DoxyCode}
